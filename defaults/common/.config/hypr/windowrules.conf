# Webcam overlay (prism-screenrecord)
# Goal: A circular/rounded bubble in the corner that follows you
windowrule {
    name = webcam_overlay
    match:title = ^(WebcamOverlay)$
    
    # Behavior
    float = 1
    pin = 1           # Show on all workspaces
    # focus = 0         # Do not steal focus
    
    # Geometry (Top Right)
    move = 100%-w-20 20
    size = 320 320    # Force aspect ratio size
    
    # Styling (Bubble look)
    rounding = 20
    border_size = 2
    # Optional: Set border color to red to indicate "Live"
    # border_color = rgb(ff5555) 
}

# Prism TUI Managers (Wifi, Bluetooth, Audio)
# Matches app-ids generated by 'prism-tui' (org.prism.<name>)
windowrule {
    name = prism_tui
    # Match any window class starting with org.prism.
    match:class = ^(org.prism.)(impala|bluetui)$
    stay_focused = on
    
    # Behavior
    float = 1
    center = 1
    dim_around = 0
    
    # Styling
    size = 900 600
    rounding = 15
}

# Picture in Picture (Firefox/Chrome) 
windowrule {
    name = picture_in_picture
    match:title = ^(Picture-in-Picture)$
    float = 1
    pin = 1
    move = 100%-w-20 100%-h-20
    rounding = 10
}

windowrule {
    name = yazi
    match:class = ^(org.prism.yazi)$
    stay_focused = off
    float = 0
    center = 0
    dim_around = 0
    pin = 0
}

# Common dialogs 
# Make file pickers and settings windows float naturally
windowrule = float 1, match:class ^(xdg-desktop-portal-gtk)$
windowrule = float 1, center 1, match:class ^(lxappearance)$
windowrule = float 1, center 1, size 800 500, match:class ^(pavucontrol)$
windowrule = float 1, center 1, match:class ^(blueman-manager)$
windowrule = float 1, center 1, match:class ^(nm-connection-editor)$

# Blur the Eww bar and calendar
layerrule = blur on

# ==============================================================================
# SPECIAL WORKSPACE RULES (Music, Chat, AI)
# ==============================================================================

# MUSIC (Workspace 99)
# Matches: "Spotify", "YouTube Music", "Apple Music", "SoundCloud", "Deezer"
windowrule = workspace 99 silent, match:title ^(Spotify.*|YouTube Music|Apple Music|SoundCloud|Deezer.*)$

# CHAT (Workspace 98)
# Matches: "WhatsApp", "Telegram", "Discord", "Slack"
windowrule = workspace 98 silent, match:title ^(WhatsApp.*|Telegram.*|Discord.*|Slack.*)$

# AI (Workspace 97)
# Matches: "ChatGPT", "Gemini", "Claude", "DeepSeek"
windowrule = workspace 97 silent, match:title ^(ChatGPT.*|Gemini.*|Claude.*|DeepSeek.*)$
